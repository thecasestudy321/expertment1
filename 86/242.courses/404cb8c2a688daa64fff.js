webpackJsonp([242],{268:function(e,a,t){"use strict";nb.substance6017=extendsClass(ScienceMain,{frame0:function(){var e=this;instance.viewStack.NBONOFF.visible=!1;var a=e.jiandao,t=e.rope0,n=e.paper,i=e.rope1,r=e.ani,o=e.candle,p=[],s=[0],c=ParticleUtil.getParticle(ParticleUtil.particles.spirit_fire);e.txt1.x+=30,e.txt0.x+=10,r.alpha=0,t.label=e.txt0,t.initX=t.x,t.initY=t.y,i.alpha=0,a.label=e.txt1,a.initX=a.x,a.initY=a.y,a.speed=300,instance.NBDownTip.showTip("用剪刀沿着纸蛇边线进行裁剪"),NBDrag.addDrag(a),a.addEventListener(NBDrag.event.START_DRAG,T),a.addEventListener(NBDrag.event.STOP_DRAG,f),o.alpha=0,c.scale.set(.4,.4),c.bind(o,-10,-120),o.addChild(c),o.initY=o.y;var l=35,h=!1,d=.2,x=!1;function T(){this.label.alpha=0,instance.NBDownTip.hideTip()}function f(){NBDrag.removeDrag(a),this.hitTest(n.ref)?(TweenMax.to(a.scale,.5,{x:.5,y:.5}),TweenMax.to(a,.5,{x:e.p0.x,y:e.p0.y,rotation:0,onComplete:function(){a.play(),function(){for(var i=new TimelineMax({onComplete:function(){instance.NBDownTip.showTip("将绳子穿过纸蛇的尾端"),NBDrag.addDrag(t),t.addEventListener(NBDrag.event.START_DRAG,T),t.addEventListener(NBDrag.event.STOP_DRAG,u),a.stop(),TweenMax.to([a,n.background],.3,{alpha:0})}}),r=function(t){var n=e["p"+t];if(!n)return"break";if(p.push(n),t>0){var r=function(e,a){return Math.sqrt(Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2))}(p[t-1],p[t]),o=r/a.speed,c=Math.atan2(p[t].y-p[t-1].y,p[t].x-p[t-1].x)+Math.PI/2;c<0&&(c+=2*Math.PI),Math.abs(s[t]-s[t-1])/Math.PI>1&&(s[t]>s[t-1]?s[t-1]+=2*Math.PI:s[t]+=2*Math.PI),s.push(c);var l=TweenMax.to(a,o,{x:p[t].x,y:p[t].y,ease:Linear.easeIn,onStart:function(){Math.abs(s[t]-s[t-1])/Math.PI>1&&(s[t]>s[t-1]?s[t-1]+=2*Math.PI:s[t]+=2*Math.PI)},onUpdate:function(){var e=l.progress();a.rotation=(s[t]-s[t-1])*e+s[t-1]}});i.add(l)}},o=0;o<int.MAX_VALUE;o++){var c=r(o);if("break"===c)break}}()}})):(TweenMax.to(a,.5,{x:a.initX,y:a.initY,onComplete:function(){NBDrag.addDrag(a),a.label.alpha=1}}),instance.NBDownTip.showTip("用剪刀沿着纸蛇边线进行裁剪"))}function u(){if(t.interactive=!1,this.hitTest(n.ref)){var a=new TimelineMax({onComplete:function(){i.alpha=n.alpha=0,r.alpha=1;var e=new TimelineMax({onComplete:function(){x=!0,NBDrag.addDrag(o),o.addEventListener(NBDrag.event.DRAG_MOVE,v),o.addEventListener(NBDrag.event.START_DRAG,function(){instance.NBDownTip.hideTip()}),instance.NBDownTip.showTip("移动蜡烛在纸蛇下面观察现象")}});e.to(r,3,{currentFrame:35,x:"+=40",y:"-=120",ease:Linear.easeIn}),e.to(o,.3,{alpha:1})}});a.to(t,.5,{x:e.ropeTarget.x,y:e.ropeTarget.y}),a.add([TweenMax.to(t,.3,{alpha:0}),TweenMax.to(i,.3,{alpha:1})])}else TweenMax.to(t,.5,{x:t.initX,y:t.initY,onComplete:function(){NBDrag.addDrag(t),t.interactive=!0,t.label.alpha=1}}),instance.NBDownTip.showTip("将绳子穿过纸蛇的尾端")}e.onUpdate=function(){c.render(),x&&(h?d<.4&&(d+=.003):d>.2?d-=.003:d=0,(l+=d)>=r.totalFrames&&(l=35),r.currentFrame=l)};var D=80;function v(){o.y=o.initY,h=o.x>640-D&&o.x<640+D}},start:function(){this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"热空气是怎样流动的呢？借助下面的实验进行说明。",labName:"热空气的流动",CONCLUSION:"空气受热会向上流动，热空气上升。烛火产生热气流，使纸蛇转动起来。",newLayOut:!0,bgColor:"#6699CC"},const:{},event:{}}),e.exports=nb.substance6017}});